\hypertarget{_datos_geolocalizacion_8php_source}{}\doxysection{Datos\+Geolocalizacion.\+php}
\label{_datos_geolocalizacion_8php_source}\index{C:/xampp/htdocs/Ficha/vista/DatosGeolocalizacion.php@{C:/xampp/htdocs/Ficha/vista/DatosGeolocalizacion.php}}
\mbox{\hyperlink{_datos_geolocalizacion_8php}{Ir a la documentación de este archivo.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00001}00001 <?php require\_once \textcolor{stringliteral}{"{}vistas/parte\_superiorAlumno.php"{}}?>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00002}00002 <?php require\_once \textcolor{stringliteral}{"{}Registros/control/in\_laborales.php"{}};?>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00003}00003 <script type=\textcolor{stringliteral}{"{}text/javascript"{}} src=\textcolor{stringliteral}{"{}https://cdn.jsdelivr.net/npm/html2canvas@1.0.0-\/rc.1/dist/html2canvas.min.js"{}}></script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00004}00004 <script type=\textcolor{stringliteral}{"{}text/javascript"{}} src=\textcolor{stringliteral}{"{}https://unpkg.com/2cs-\/canvas2image@0.0.2/canvas2image.js"{}}></script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00005}00005 <script src=\textcolor{stringliteral}{"{}https://ajax.googleapis.com/ajax/libs/jquery/2.2.2/jquery.min.js"{}}></script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00006}00006 <link rel=\textcolor{stringliteral}{"{}stylesheet"{}} href=\textcolor{stringliteral}{"{}../vista/estilos/s\_Geolocalizacion.css"{}} />}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00007}00007 <script type=\textcolor{stringliteral}{"{}text/javascript"{}} src=\textcolor{stringliteral}{"{}../vista/js//dom-\/to-\/image.js"{}}></script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00008}00008 <script type=\textcolor{stringliteral}{"{}text/javascript"{}} src=\textcolor{stringliteral}{"{}"{}}></script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00009}00009 <script type=\textcolor{stringliteral}{"{}text/javascript"{}} src=\textcolor{stringliteral}{"{}"{}}></script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00010}00010 <div \textcolor{keyword}{class}=\textcolor{stringliteral}{"{}container"{}} \textcolor{keywordtype}{id}=\textcolor{stringliteral}{'container'}>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00011}00011     <h1 style=\textcolor{stringliteral}{"{}text-\/align: center;"{}}>Ficha de identificación</h1>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00012}00012     <h3 style=\textcolor{stringliteral}{"{}text-\/align: center;"{}}>Datos de localización</h3>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00013}00013     <div \textcolor{keywordtype}{id}=\textcolor{stringliteral}{"{}map"{}} \textcolor{keyword}{class}=\textcolor{stringliteral}{"{}map"{}}></div>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00014}00014     <div \textcolor{keywordtype}{id}=\textcolor{stringliteral}{"{}informacion"{}}>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00015}00015     <\mbox{\hyperlink{_datos_escolares_8php_a5250c7b8d4db609ffe17f7211a9b7619}{form}} \textcolor{keywordtype}{id}=\textcolor{stringliteral}{'formularioGeo'} method=\textcolor{stringliteral}{"{}post"{}} action = \textcolor{stringliteral}{''}>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00016}00016             <table>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00017}00017               <tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00018}00018                 <td>  Calle:   </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00019}00019                 <td>  <input type=\textcolor{stringliteral}{"{}text"{}} \textcolor{keyword}{class}= \textcolor{stringliteral}{"{}form-\/control"{}} name=\textcolor{stringliteral}{"{}Calle"{}} placeholder=\textcolor{stringliteral}{"{}callle"{}} \textcolor{keywordtype}{id} =\textcolor{stringliteral}{"{}calle"{}} auntocompleto= \textcolor{stringliteral}{"{}off"{}}> </td>          }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00020}00020               </tr> }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00021}00021               <tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00022}00022                 <td>  Municipio:   </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00023}00023                 <td>  <input type=\textcolor{stringliteral}{"{}text"{}} \textcolor{keyword}{class}= \textcolor{stringliteral}{"{}form-\/control"{}} name=\textcolor{stringliteral}{"{}municipio"{}} placeholder=\textcolor{stringliteral}{"{}Municipio"{}} \textcolor{keywordtype}{id} =\textcolor{stringliteral}{"{}municipio"{}} auntocompleto= \textcolor{stringliteral}{"{}off"{}}> </td>          }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00024}00024               </tr> }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00025}00025               <tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00026}00026               <td>  Colonia:   </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00027}00027                 <td>  <input type=\textcolor{stringliteral}{"{}text"{}} \textcolor{keyword}{class}= \textcolor{stringliteral}{"{}form-\/control"{}} name=\textcolor{stringliteral}{"{}colonia"{}} placeholder=\textcolor{stringliteral}{"{}Colonia"{}} \textcolor{keywordtype}{id} =\textcolor{stringliteral}{"{}colonia"{}} auntocompleto= \textcolor{stringliteral}{"{}off"{}}> </td>         }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00028}00028                 <td> <button type=\textcolor{stringliteral}{"{}button"{}} \textcolor{keywordtype}{id}=\textcolor{stringliteral}{'BOTON'} onclick=\textcolor{stringliteral}{"{}buscar('calle','municipio','estado1')"{}}></button></td> }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00029}00029               </tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00030}00030               <tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00031}00031                 <td>  Cordenada X:  </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00032}00032                 <td>  <input type=\textcolor{stringliteral}{"{}text"{}} \textcolor{keyword}{class}= \textcolor{stringliteral}{"{}form-\/control"{}} readonly \textcolor{keywordtype}{id}=\textcolor{stringliteral}{'cx'} name=\textcolor{stringliteral}{"{}cx"{}} auntocompleto= \textcolor{stringliteral}{"{}off"{}}> </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00033}00033               </tr> }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00034}00034               <tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00035}00035                 <td>  Cordenada Y: </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00036}00036                 <td>  <input type=\textcolor{stringliteral}{"{}text"{}}  \textcolor{keyword}{class}= \textcolor{stringliteral}{"{}form-\/control"{}} readonly \textcolor{keywordtype}{id}=\textcolor{stringliteral}{'cy'}name=\textcolor{stringliteral}{"{}cy"{}} auntocompleto= \textcolor{stringliteral}{"{}off"{}}> </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00037}00037               </tr> }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00038}00038               <tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00039}00039                 <td>  En caso de accidente avisar a: Nombre del padre/madre/tutor (a):   </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00040}00040                 <td>  <input type=\textcolor{stringliteral}{"{}text"{}}  class= \textcolor{stringliteral}{"{}form-\/control"{}} name=\textcolor{stringliteral}{"{}nombreTutor"{}}  id=\textcolor{stringliteral}{"{}nombreTutor"{}}  auntocompleto= \textcolor{stringliteral}{"{}off"{}}> </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00041}00041               </tr> }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00042}00042               <tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00043}00043                 <td>  Telefono(Casa): </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00044}00044                 <td>  <input type=\textcolor{stringliteral}{"{}text"{}}  class= \textcolor{stringliteral}{"{}form-\/control"{}} id=\textcolor{stringliteral}{"{}telCasa"{}} name=\textcolor{stringliteral}{"{}telCasa"{}} auntocompleto= \textcolor{stringliteral}{"{}off"{}}> </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00045}00045               </tr> }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00046}00046               <tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00047}00047                 <td>  Telefono(Movil):  </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00048}00048                 <td>  <input type=\textcolor{stringliteral}{"{}text"{}}  class= \textcolor{stringliteral}{"{}form-\/control"{}} id=\textcolor{stringliteral}{"{}telMovil"{}} name=\textcolor{stringliteral}{"{}telMovil"{}} auntocompleto= \textcolor{stringliteral}{"{}off"{}}> </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00049}00049               </tr> }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00050}00050               <tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00051}00051                 <td> <button type=\textcolor{stringliteral}{"{}submit"{}} id=\textcolor{stringliteral}{'btn\_grabar'} class=\textcolor{stringliteral}{'btn btn-\/success btn-\/sm'}>Guardar</button></td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00052}00052                 <td> <button type=\textcolor{stringliteral}{"{}button"{}} class=\textcolor{stringliteral}{'btn btn-\/danger btn-\/sm'}>Cancelar</button>              </td>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00053}00053                 </tr>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00054}00054             </table>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00055}00055         </\mbox{\hyperlink{_datos_escolares_8php_a5250c7b8d4db609ffe17f7211a9b7619}{form}}>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00056}00056 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00057}00057 </div> }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00058}00058 <div id=\textcolor{stringliteral}{"{}estado"{}} style=\textcolor{stringliteral}{"{}display:none;"{}}></div>  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00059}00059 </div>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00060}00060 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00061}00061 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00062}00062   <script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00063}00063     \$(document).on(\textcolor{stringliteral}{'click'}, \textcolor{stringliteral}{'\#btn\_grabar'}, function(e)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00064}00064             e.preventDefault();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00065}00065             var calle = \$(\textcolor{stringliteral}{'\#calle'}).val(), municipio = \$(\textcolor{stringliteral}{'\#municipio'}).val(), colonia= \$(\textcolor{stringliteral}{'\#colonia'}).val();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00066}00066             var tutor = \$(\textcolor{stringliteral}{'\#nombreTutor'}).val(), telCasa = \$(\textcolor{stringliteral}{'\#telCasa'}).val(), telMovil= \$(\textcolor{stringliteral}{'\#telMovil'}).val() , cx= \$(\textcolor{stringliteral}{'\#cx'}).val(), cy= \$(\textcolor{stringliteral}{'\#cy'}).val();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00067}00067             \textcolor{comment}{//alert(calle + municipio + estado + tutor + telMovil + telCasa);}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00068}00068             var matricula = <?php  echo \$\_SESSION[\textcolor{stringliteral}{'id\_Cliente'}]  ?>;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00069}00069             \$.ajax(\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00070}00070               url: \textcolor{stringliteral}{'../vista/Registros/control/in\_cordenadas.php'}, \textcolor{comment}{// Es importante que la ruta sea correcta si no, no se va a ejecutar}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00071}00071               method: \textcolor{stringliteral}{'POST'},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00072}00072               data: \{calle:calle, municipio:municipio ,colonia:colonia , cx:cx , cy:cy , tutor:tutor, telCasa:telCasa , telMovil:telMovil, matricula:matricula\},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00073}00073               beforeSend: \textcolor{keyword}{function}()\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00074}00074                 \$(\textcolor{stringliteral}{'\#estado'}).css(\textcolor{stringliteral}{'display'},\textcolor{stringliteral}{'block'});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00075}00075                 \$(\textcolor{stringliteral}{'\#estado p'}).html(\textcolor{stringliteral}{'Guardando datos...'});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00076}00076               \},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00077}00077               \textcolor{comment}{//en caso de que se ejecute  r retornara 1 }}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00078}00078               success: \textcolor{keyword}{function}(r)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00079}00079                 console.log(r);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00080}00080                 \textcolor{keywordflow}{if}(r==1)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00081}00081                   Swal.fire(}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00082}00082                     \textcolor{stringliteral}{"{}Registro Exitoso"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00083}00083                     \textcolor{stringliteral}{"{}Corecto!"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00084}00084                     \textcolor{stringliteral}{"{}success"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00085}00085                     setTimeout(() => \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00086}00086                       window.location=\textcolor{stringliteral}{"{}indexAlumno.php"{}};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00087}00087                     \}, 2500);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00088}00088                 \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00089}00089                   Swal.fire(\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00090}00090                     position: \textcolor{stringliteral}{"{}top-\/end"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00091}00091                     icon: \textcolor{stringliteral}{"{}success"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00092}00092                     title: \textcolor{stringliteral}{"{}Ya has registrado una respuesta"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00093}00093                     showConfirmButton: \textcolor{keyword}{false},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00094}00094                     timer: 2500}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00095}00095                   \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00096}00096                   setTimeout(() => \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00097}00097                       window.location=\textcolor{stringliteral}{"{}indexAlumno.php"{}};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00098}00098                     \}, 2600);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00099}00099                 \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00100}00100               \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00101}00101             \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00102}00102             \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00103}00103 </script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00104}00104 <script type=\textcolor{stringliteral}{"{}text/javascript"{}}>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00105}00105 var itsoehla = 20.20508;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00106}00106 var itsoehlong =-\/99.2226;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00107}00107 var lati = 20.21688898553249;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00108}00108 var \textcolor{keywordtype}{long} =-\/99.20135962073277;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00109}00109 var platform = \textcolor{keyword}{new} H.service.Platform(\{apikey: \textcolor{stringliteral}{"{}uATgVUvD\_u3aL87IpdbDu-\/cUs1zNodOcJnF8YWfvJV0"{}}\});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00110}00110 var defaultLayers = platform.createDefaultLayers();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00111}00111 \textcolor{comment}{//Step 2: initialize a map -\/ this map is centered over Europe}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00112}00112 var map = \textcolor{keyword}{new} H.Map(document.getElementById(\textcolor{stringliteral}{'map'}),}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00113}00113       defaultLayers.vector.normal.map,\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00114}00114       center: \{lat:lati, lng:\textcolor{keywordtype}{long}\},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00115}00115       zoom: 14,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00116}00116     pixelRatio: window.devicePixelRatio || 1\});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00117}00117     \textcolor{comment}{// add a resize listener to make sure that the map occupies the whole container}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00118}00118     window.addEventListener(\textcolor{stringliteral}{'resize'}, () => map.getViewPort().resize());}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00119}00119     \textcolor{comment}{//Step 3: make the map interactive}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00120}00120     \textcolor{comment}{// MapEvents enables the event system}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00121}00121     \textcolor{comment}{// Behavior implements default interactions for pan/zoom (also on mobile touch environments)}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00122}00122  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00123}00123     \textcolor{comment}{// Create the default UI components}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00124}00124     var ui = H.ui.UI.createDefault(map, defaultLayers);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00125}00125     }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00126}00126     var behavior = \textcolor{keyword}{new} H.mapevents.Behavior(\textcolor{keyword}{new} H.mapevents.MapEvents(map));}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00127}00127     \textcolor{keyword}{const} routerService = platform.getRoutingService();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00128}00128     \textcolor{comment}{// Now use the map as required...}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00129}00129     \textcolor{comment}{//Variables auxiliares para ciclar el proceso}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00130}00130     var axbuscar = 0;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00131}00131     var tempbucar = 0;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00132}00132     var axclick =0;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00133}00133     var tempclick =0;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00134}00134     \textcolor{comment}{//Variables que almacenan temporal el objeto marker o marcador }}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00135}00135     var marcador1 = [];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00136}00136     var marcador2 = [];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00137}00137     var marcador3 = [];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00138}00138     var marcador4 = [];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00139}00139      \textcolor{comment}{//Variables que almacenan temporal el dibujo del ruteo de ubicacion}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00140}00140     var objrouting= [];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00141}00141     var objrouting1 = [];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00142}00142     var domicilio = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00143}00143    }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00144}00144     \textcolor{keyword}{const} ITSOEH = \textcolor{keyword}{new} H.map.Marker(\{lat: itsoehla, lng: itsoehlong\});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00145}00145     \textcolor{comment}{//Metodo buscar se puede ejecutar cuanta veses sea nesesario}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00146}00146     \textcolor{keyword}{function} buscar(\textcolor{keywordtype}{id},id1,id2)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00147}00147       \textcolor{comment}{//Etiqueta que permite darle un mesaje al marcador}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00148}00148         ITSOEH.setData(\textcolor{stringliteral}{'<div><a href="{}http://www.itsoeh.edu.mx/"{}  target="{}\_blank"{}>ITSOEH</a></div>'});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00149}00149         ITSOEH.addEventListener(\textcolor{stringliteral}{"{}pointermove"{}},event =>\{\textcolor{keyword}{const} bubble = \textcolor{keyword}{new} H.ui.InfoBubble(}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00150}00150         event.target.getGeometry(),}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00151}00151         \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00152}00152           content: event.target.getData()}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00153}00153         \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00154}00154       );}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00155}00155       ui.addBubble(bubble);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00156}00156     \}, \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00157}00157     map.addObject(ITSOEH);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00158}00158         var Calle = document.getElementById(\textcolor{keywordtype}{id}).value;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00159}00159         var Municipio = document.getElementById(id1).value;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00160}00160         var Estado = document.getElementById(id2).value;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00161}00161         domicilio = Calle+\textcolor{stringliteral}{"{},"{}}+Municipio+\textcolor{stringliteral}{"{},"{}}+Estado;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00162}00162         \textcolor{comment}{//Si axbuscar = 0 < 1 entra }}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00163}00163         \textcolor{keywordflow}{if}(axbuscar<1)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00164}00164           \textcolor{keyword}{const} geocoderService = platform.getGeocodingService();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00165}00165           geocoderService.geocode(\{\textcolor{stringliteral}{"{}searchtext"{}}:domicilio\},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00166}00166               success=>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00167}00167                       \textcolor{keyword}{const} location = success.Response.View[0].Result[0].Location.DisplayPosition;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00168}00168                       \textcolor{keyword}{const} marker1 = \textcolor{keyword}{new} H.map.Marker(\{lat: location.Latitude, lng: location.Longitude\});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00169}00169                       \textcolor{keyword}{const} routingline = \textcolor{keyword}{new} H.geo.LineString();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00170}00170                       \textcolor{keyword}{const} params =\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00171}00171                       mode : \textcolor{stringliteral}{"{}fastest;car;traffic:enabled"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00172}00172                       waypoint0: location.Latitude + \textcolor{stringliteral}{"{},"{}}+ location.Longitude,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00173}00173                       waypoint1: itsoehla + \textcolor{stringliteral}{"{},"{}}+ itsoehlong,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00174}00174                       representation : \textcolor{stringliteral}{"{}display"{}}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00175}00175                       \};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00176}00176                       routerService.calculateRoute(params, success=>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00177}00177                         ruta = success.response.route[0].shape;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00178}00178                       ruta.forEach(points =>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00179}00179                         \mbox{\hyperlink{_datos_escolares_8php_ad576c58b2dcc093acb642a0cba1883c5}{let}} parts = points.split(\textcolor{stringliteral}{"{},"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00180}00180                         routingline.pushPoint(\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00181}00181                           lat: parts[0],}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00182}00182                           lng: parts[1]}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00183}00183                         \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00184}00184 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00185}00185                       \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00186}00186                           \textcolor{keyword}{const} rutaestatica = \textcolor{keyword}{new} H.map.Polyline(routingline,\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00187}00187                           style:\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00188}00188                             lineWidth:5}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00189}00189                           \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00190}00190                         \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00191}00191                         );}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00192}00192                         objrouting.push(rutaestatica);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00193}00193                         map.addObject(objrouting[0]);  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00194}00194                         }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00195}00195                         console.log(success.response.route[0].shape);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00196}00196                       \},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00197}00197                       error=>\{console.log(error);\});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00198}00198 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00199}00199                       \mbox{\hyperlink{_datos_escolares_8php_ad576c58b2dcc093acb642a0cba1883c5}{let}} lat = \textcolor{stringliteral}{"{}"{}}+ location.Latitude;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00200}00200                       \mbox{\hyperlink{_datos_escolares_8php_ad576c58b2dcc093acb642a0cba1883c5}{let}} \textcolor{keywordtype}{long} = \textcolor{stringliteral}{"{}"{}}+ location.Longitude;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00201}00201                       document.getElementById(\textcolor{stringliteral}{"{}cx"{}}).value =  lat.substring(0,8);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00202}00202                       document.getElementById(\textcolor{stringliteral}{"{}cy"{}}).value =  \textcolor{keywordtype}{long}.substring(0,8);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00203}00203                       \textcolor{comment}{// Se crea el primer marcador en Marcador1[0]}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00204}00204                       marcador1.push(marker1);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00205}00205                       map.addObject(marcador1[0]);    }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00206}00206                       \textcolor{comment}{// Termina el marcador}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00207}00207                       \},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00208}00208                           error=>\{ console.error(error);\});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00209}00209                           \textcolor{comment}{// se incrmenta la variable axbuscar paara entra al else}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00210}00210                       axbuscar++;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00211}00211                       \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00212}00212                       \textcolor{keywordflow}{if}(tempbucar==1)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00213}00213                         map.removeObject(marcador2[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00214}00214                         marcador2.pop();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00215}00215                         map.removeObject(objrouting[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00216}00216                         objrouting.pop()}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00217}00217                         tempbucar-\/-\/;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00218}00218                       \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00219}00219                       \textcolor{keywordflow}{if}(axclick == 1)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00220}00220                         axclick-\/-\/;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00221}00221                         map.removeObject(marcador3[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00222}00222                         marcador3.pop();  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00223}00223                         map.removeObject(objrouting1[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00224}00224                         objrouting1.pop();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00225}00225                       \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00226}00226                       console.log(axbuscar+\textcolor{stringliteral}{"{}"{}}+ tempbucar + \textcolor{stringliteral}{'buscar'});   }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00227}00227                       \textcolor{keywordflow}{if}(tempclick ==1)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00228}00228                         tempclick-\/-\/;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00229}00229                         map.removeObject(marcador4[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00230}00230                         marcador4.pop();  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00231}00231                         map.removeObject(objrouting1[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00232}00232                         objrouting1.pop();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00233}00233                       \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00234}00234         \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00235}00235           axbuscar-\/-\/;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00236}00236           map.removeObject(objrouting[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00237}00237           objrouting.pop();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00238}00238           map.removeObject(marcador1[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00239}00239           marcador1.pop(); }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00240}00240          }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00241}00241         \textcolor{keyword}{const} geocoderService = platform.getGeocodingService();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00242}00242           geocoderService.geocode(\{\textcolor{stringliteral}{"{}searchtext"{}}:domicilio\},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00243}00243               success=>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00244}00244                   \textcolor{keyword}{const} location = success.Response.View[0].Result[0].Location.DisplayPosition;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00245}00245                   \textcolor{keyword}{const} marker1 = \textcolor{keyword}{new} H.map.Marker(\{lat: location.Latitude, lng: location.Longitude\});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00246}00246                   \textcolor{keyword}{const} routingline = \textcolor{keyword}{new} H.geo.LineString();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00247}00247                       \mbox{\hyperlink{_datos_escolares_8php_ad576c58b2dcc093acb642a0cba1883c5}{let}} lat = \textcolor{stringliteral}{"{}"{}}+ location.Latitude;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00248}00248                       \mbox{\hyperlink{_datos_escolares_8php_ad576c58b2dcc093acb642a0cba1883c5}{let}} \textcolor{keywordtype}{long} = \textcolor{stringliteral}{"{}"{}}+ location.Longitude;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00249}00249                       \textcolor{keyword}{const} params =\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00250}00250                       mode : \textcolor{stringliteral}{"{}fastest;car;traffic:enabled"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00251}00251                       waypoint0: location.Latitude + \textcolor{stringliteral}{"{},"{}}+ location.Longitude,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00252}00252                       waypoint1: itsoehla + \textcolor{stringliteral}{"{},"{}}+ itsoehlong,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00253}00253                       representation : \textcolor{stringliteral}{"{}display"{}}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00254}00254                       \};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00255}00255                       routerService.calculateRoute(params, success=>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00256}00256                         ruta = success.response.route[0].shape;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00257}00257                       ruta.forEach(points =>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00258}00258                         \mbox{\hyperlink{_datos_escolares_8php_ad576c58b2dcc093acb642a0cba1883c5}{let}} parts = points.split(\textcolor{stringliteral}{"{},"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00259}00259                         routingline.pushPoint(\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00260}00260                           lat: parts[0],}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00261}00261                           lng: parts[1]}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00262}00262                         \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00263}00263 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00264}00264                       \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00265}00265                           \textcolor{keyword}{const} rutaestatica = \textcolor{keyword}{new} H.map.Polyline(routingline,\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00266}00266                           style:\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00267}00267                             lineWidth:5}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00268}00268                           \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00269}00269                         \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00270}00270                         );}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00271}00271                         objrouting.push(rutaestatica);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00272}00272                         map.addObject(objrouting[0]);  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00273}00273                         }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00274}00274                         console.log(success.response.route[0].shape);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00275}00275                       \},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00276}00276                       error=>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00277}00277                         console.log(error);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00278}00278 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00279}00279                       \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00280}00280                       document.getElementById(\textcolor{stringliteral}{"{}cx"{}}).value =  lat.substring(0,8);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00281}00281                       document.getElementById(\textcolor{stringliteral}{"{}cy"{}}).value =  \textcolor{keywordtype}{long}.substring(0,8);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00282}00282                   marcador2.push(marker1);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00283}00283                   map.addObject(marcador2[0]);    }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00284}00284                       \},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00285}00285           error=>\{ console.error(error);\});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00286}00286           tempbucar++;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00287}00287           console.log(axbuscar+\textcolor{stringliteral}{"{}"{}} + tempbucar + \textcolor{stringliteral}{'buscar'});   }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00288}00288           \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00289}00289     \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00290}00290    }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00291}00291 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00292}00292   }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00293}00293     map.addEventListener(\textcolor{stringliteral}{"{}tap"{}}, event=>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00294}00294         \textcolor{keyword}{const} ITSOEH = \textcolor{keyword}{new} H.map.Marker(\{lat: itsoehla, lng: itsoehlong\});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00295}00295         ITSOEH.setData(\textcolor{stringliteral}{'<div><a href="{}http://www.itsoeh.edu.mx/"{}  target="{}\_blank"{}>ITSOEH</a></div>'});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00296}00296         ITSOEH.addEventListener(\textcolor{stringliteral}{"{}pointermove"{}},event =>\{\textcolor{keyword}{const} bubble = \textcolor{keyword}{new} H.ui.InfoBubble(}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00297}00297         event.target.getGeometry(),}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00298}00298         \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00299}00299           content: event.target.getData()}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00300}00300         \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00301}00301       );}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00302}00302       ui.addBubble(bubble);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00303}00303     \}, \textcolor{keyword}{false});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00304}00304     map.addObject(ITSOEH);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00305}00305       \textcolor{keyword}{const} position = map.screenToGeo(}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00306}00306         event.currentPointer.viewportX,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00307}00307         event.currentPointer.viewportY);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00308}00308         }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00309}00309         \textcolor{keyword}{const} marker = \textcolor{keyword}{new} H.map.Marker(position);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00310}00310 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00311}00311         if (axclick<1) \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00312}00312           marcador3.push(marker);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00313}00313           map.addObject(marcador3[0]);   }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00314}00314           axclick++;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00315}00315           \textcolor{keywordflow}{if}(tempclick==1)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00316}00316             tempclick-\/-\/;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00317}00317             map.removeObject(marcador4[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00318}00318             marcador4.pop();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00319}00319             map.removeObject(objrouting1[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00320}00320             objrouting1.pop() ;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00321}00321           \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00322}00322             console.log(axclick+\textcolor{stringliteral}{"{}"{}} + tempclick + \textcolor{stringliteral}{'click'}); }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00323}00323             \textcolor{keywordflow}{if}(axbuscar == 1)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00324}00324             axbuscar-\/-\/;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00325}00325             map.removeObject(marcador1[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00326}00326             marcador1.pop(); }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00327}00327             map.removeObject(objrouting[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00328}00328             objrouting.pop() ;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00329}00329                       \}  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00330}00330             \textcolor{keywordflow}{if}(tempbucar == 1)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00331}00331             tempbucar-\/-\/;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00332}00332             map.removeObject(marcador2[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00333}00333             marcador2.pop(); }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00334}00334             map.removeObject(objrouting[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00335}00335             objrouting.pop() ; }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00336}00336                       \}        }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00337}00337           var cordenads =  marker.getGeometry().toString();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00338}00338             \textcolor{comment}{// remover parentisis}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00339}00339             cordenads = cordenads.replace(\textcolor{stringliteral}{"{})"{}},\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00340}00340             cordenads = cordenads.replace(\textcolor{stringliteral}{"{}("{}},\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00341}00341             cordenads = cordenads.replace(\textcolor{stringliteral}{"{}POINT "{}},\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00342}00342             var lista = cordenads.split(\textcolor{stringliteral}{"{} "{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00343}00343             var geocoder = platform.getGeocodingService()}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00344}00344             var direccion = lista[1]+\textcolor{stringliteral}{"{},"{}}+lista[0];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00345}00345             parameters = \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00346}00346                 prox: direccion,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00347}00347                 mode: \textcolor{stringliteral}{'retrieveAddresses'},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00348}00348                 maxresults: \textcolor{charliteral}{'1'}\};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00349}00349                 \textcolor{comment}{//metodo que permite la codificiacion inversa al hacer clil}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00350}00350             geocoder.reverseGeocode(parameters,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00351}00351               \textcolor{keyword}{function} (result) \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00352}00352                 console.log(result);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00353}00353                 \textcolor{keyword}{const} calle = result.Response.View[0].Result[0].Location.Address.Street;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00354}00354                 \textcolor{keyword}{const} mun =  result.Response.View[0].Result[0].Location.Address.City;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00355}00355                 \textcolor{keyword}{const} distrito = result.Response.View[0].Result[0].Location.Address.District;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00356}00356                 \textcolor{keywordflow}{if}(calle)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00357}00357                   document.getElementById(\textcolor{stringliteral}{"{}calle"{}}).value = calle;    }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00358}00358                 \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00359}00359                   document.getElementById(\textcolor{stringliteral}{"{}calle"{}}).value = distrito; }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00360}00360                 \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00361}00361                 document.getElementById(\textcolor{stringliteral}{"{}municipio"{}}).value = mun;  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00362}00362                 document.getElementById(\textcolor{stringliteral}{"{}colonia"{}}).value = distrito;  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00363}00363 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00364}00364               \}, \textcolor{keyword}{function} (error) \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00365}00365                 console.log(error);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00366}00366               \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00367}00367             document.getElementById(\textcolor{stringliteral}{"{}cx"{}}).value = lista[1].substring(0, 8);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00368}00368             document.getElementById(\textcolor{stringliteral}{"{}cy"{}}).value = lista[0].substring(0, 8);   }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00369}00369             \textcolor{keyword}{const} routingline = \textcolor{keyword}{new} H.geo.LineString();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00370}00370                       \textcolor{keyword}{const} params =\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00371}00371                       mode : \textcolor{stringliteral}{"{}fastest;car;traffic:enabled"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00372}00372                       waypoint0: lista[1].substring(0, 8) + \textcolor{stringliteral}{"{},"{}}+ lista[0].substring(0, 8),}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00373}00373                       waypoint1: itsoehla + \textcolor{stringliteral}{"{},"{}}+ itsoehlong,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00374}00374                       representation : \textcolor{stringliteral}{"{}display"{}}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00375}00375                       \};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00376}00376                       routerService.calculateRoute(params, success=>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00377}00377                         ruta = success.response.route[0].shape;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00378}00378                       ruta.forEach(points =>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00379}00379                         \mbox{\hyperlink{_datos_escolares_8php_ad576c58b2dcc093acb642a0cba1883c5}{let}} parts = points.split(\textcolor{stringliteral}{"{},"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00380}00380                         routingline.pushPoint(\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00381}00381                           lat: parts[0],}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00382}00382                           lng: parts[1]}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00383}00383                         \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00384}00384 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00385}00385                       \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00386}00386                           \textcolor{keyword}{const} rutaestatica = \textcolor{keyword}{new} H.map.Polyline(routingline,\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00387}00387                           style:\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00388}00388                             lineWidth:5}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00389}00389                           \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00390}00390                         \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00391}00391                         );}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00392}00392                         objrouting1.push(rutaestatica);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00393}00393                         map.addObject(objrouting1[0]);  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00394}00394                         }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00395}00395                         console.log(success.response.route[0].shape);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00396}00396                       \},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00397}00397                       error=>\{console.log(error);\}); }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00398}00398             }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00399}00399         \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00400}00400           axclick-\/-\/;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00401}00401           map.removeObject(marcador3[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00402}00402           marcador3.pop();  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00403}00403           map.removeObject(objrouting1[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00404}00404           objrouting1.pop() ;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00405}00405           \textcolor{keyword}{const} position = map.screenToGeo(}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00406}00406             event.currentPointer.viewportX,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00407}00407             event.currentPointer.viewportY);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00408}00408             \textcolor{keyword}{const} marker2 = \textcolor{keyword}{new} H.map.Marker(position);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00409}00409             marcador4.push(marker2);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00410}00410             map.addObject(marcador4[0]);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00411}00411             tempclick++  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00412}00412             console.log(axclick+\textcolor{stringliteral}{"{}"{}} + tempclick + \textcolor{stringliteral}{'click'});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00413}00413             var cordenads =  marker2.getGeometry().toString();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00414}00414             \textcolor{comment}{// remover parentisis}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00415}00415             cordenads = cordenads.replace(\textcolor{stringliteral}{"{})"{}},\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00416}00416             cordenads = cordenads.replace(\textcolor{stringliteral}{"{}("{}},\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00417}00417             cordenads = cordenads.replace(\textcolor{stringliteral}{"{}POINT "{}},\textcolor{stringliteral}{"{}"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00418}00418             var lista = cordenads.split(\textcolor{stringliteral}{"{} "{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00419}00419             var geocoder = platform.getGeocodingService();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00420}00420             var direccion = lista[1]+\textcolor{stringliteral}{"{},"{}}+lista[0];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00421}00421             parameters = \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00422}00422                 prox: direccion,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00423}00423                 mode: \textcolor{stringliteral}{'retrieveAddresses'},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00424}00424                 maxresults: \textcolor{charliteral}{'1'}\};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00425}00425                 geocoder.reverseGeocode(parameters,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00426}00426               \textcolor{keyword}{function} (result) \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00427}00427                 console.log(result);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00428}00428                 \textcolor{keyword}{const} calle = result.Response.View[0].Result[0].Location.Address.Street;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00429}00429                 \textcolor{keyword}{const} mun =  result.Response.View[0].Result[0].Location.Address.City;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00430}00430                 \textcolor{keyword}{const} distrito = result.Response.View[0].Result[0].Location.Address.District;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00431}00431                 \textcolor{keywordflow}{if}(calle)\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00432}00432                   document.getElementById(\textcolor{stringliteral}{"{}calle"{}}).value = calle;    }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00433}00433                 \}\textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00434}00434                   document.getElementById(\textcolor{stringliteral}{"{}calle"{}}).value = distrito; }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00435}00435                 \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00436}00436                 document.getElementById(\textcolor{stringliteral}{"{}municipio"{}}).value = mun;  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00437}00437                 document.getElementById(\textcolor{stringliteral}{"{}colonia"{}}).value = distrito;  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00438}00438 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00439}00439               \}, \textcolor{keyword}{function} (error) \{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00440}00440                 console.log(error);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00441}00441               \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00442}00442             document.getElementById(\textcolor{stringliteral}{"{}cx"{}}).value = lista[1].substring(0, 8);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00443}00443             document.getElementById(\textcolor{stringliteral}{"{}cy"{}}).value = lista[0].substring(0, 8);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00444}00444             \textcolor{keyword}{const} routingline = \textcolor{keyword}{new} H.geo.LineString();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00445}00445                       \textcolor{keyword}{const} params =\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00446}00446                       mode : \textcolor{stringliteral}{"{}fastest;car;traffic:enabled"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00447}00447                       waypoint0: lista[1].substring(0, 8) + \textcolor{stringliteral}{"{},"{}}+ lista[0].substring(0, 8),}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00448}00448                       waypoint1: itsoehla + \textcolor{stringliteral}{"{},"{}}+ itsoehlong,}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00449}00449                       representation : \textcolor{stringliteral}{"{}display"{}}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00450}00450                       \};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00451}00451                       routerService.calculateRoute(params, success=>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00452}00452                         ruta = success.response.route[0].shape;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00453}00453                       ruta.forEach(points =>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00454}00454                         \mbox{\hyperlink{_datos_escolares_8php_ad576c58b2dcc093acb642a0cba1883c5}{let}} parts = points.split(\textcolor{stringliteral}{"{},"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00455}00455                         routingline.pushPoint(\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00456}00456                           lat: parts[0],}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00457}00457                           lng: parts[1]}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00458}00458                         \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00459}00459 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00460}00460                       \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00461}00461                           \textcolor{keyword}{const} rutaestatica = \textcolor{keyword}{new} H.map.Polyline(routingline,\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00462}00462                           style:\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00463}00463                             lineWidth:5}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00464}00464                           \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00465}00465                         \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00466}00466                         );}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00467}00467                         objrouting1.push(rutaestatica);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00468}00468                         map.addObject(objrouting1[0]);  }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00469}00469                         }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00470}00470                         console.log(success.response.route[0].shape);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00471}00471                       \},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00472}00472                       error=>\{console.log(error);\}); }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00473}00473         \} }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00474}00474       \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00475}00475 </script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00476}00476 <script type=\textcolor{stringliteral}{"{}text/javascript"{}}>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00477}00477  \textcolor{keyword}{const} a = navigator.mediaDevices.getDisplayMedia;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00478}00478  \textcolor{keyword}{const} takeScreenShot = async() =>\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00479}00479    \textcolor{keyword}{const} stream = await navigator.mediaDevices.getDisplayMedia(\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00480}00480     video:\{mediaSource:\textcolor{stringliteral}{'screen'}\}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00481}00481    \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00482}00482    \textcolor{keyword}{const} track = stream.getVideoTracks()[0];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00483}00483    \textcolor{keyword}{const} image = \textcolor{keyword}{new} ImageCapture(track);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00484}00484    \textcolor{keyword}{const} bitmap = await image.grabFrame();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00485}00485    track.stop();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00486}00486    \textcolor{keyword}{const} canvas = document.getElementById(\textcolor{stringliteral}{'screenshot'});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00487}00487    canvas.width = bitmap.width;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00488}00488    canvas.height = bitmap.height;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00489}00489    \textcolor{keyword}{const} context = canvas.getContext(\textcolor{stringliteral}{'2d'});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00490}00490    \textcolor{comment}{//void ctx.drawImage(image, dx, dy, dWidth, dHeight);}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00491}00491    \textcolor{comment}{//}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00492}00492     context.drawImage(bitmap,248,50, 500,450, 250, 100, 500, 400);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00493}00493     \textcolor{comment}{//void ctx.drawImage(image, sx, sy, sWidth, sHeight, dx, dy, dWidth, dHeight);}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00494}00494   }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00495}00495    \textcolor{keyword}{const} img = canvas.toDataURL();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00496}00496    \$.ajax(\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00497}00497         url:\textcolor{stringliteral}{"{}../vista/Registros/control/in\_cordenadas.php"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00498}00498         \textcolor{comment}{// Enviar un parámetro post con el nombre base64 y con la imagen en el}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00499}00499         data:\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00500}00500             9: img}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00501}00501         \},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00502}00502         \textcolor{comment}{// Método POST}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00503}00503         type:\textcolor{stringliteral}{"{}post"{}},}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00504}00504         complete:\textcolor{keyword}{function}()\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00505}00505             console.log(\textcolor{stringliteral}{"{}Todo en orden"{}});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00506}00506         \}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00507}00507     \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00508}00508    \textcolor{keyword}{const} res = await fetch(img);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00509}00509    \textcolor{keyword}{const} buff = await res.arrayBuffer();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00510}00510    \textcolor{keyword}{const} file = [}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00511}00511      \textcolor{keyword}{new} File([buff],\textcolor{stringliteral}{'photo\_\$\{new Date()\}.jpg'},\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00512}00512        type:\textcolor{stringliteral}{'image/jpeg'}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00513}00513      \})}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00514}00514    ];}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00515}00515    console.log(file);}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00516}00516 \textcolor{keywordflow}{return} file;}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00517}00517 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00518}00518 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00519}00519 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00520}00520  \};}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00521}00521 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00522}00522               }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00523}00523 \$(\textcolor{stringliteral}{"{}\#capturar"{}}).click(\textcolor{keyword}{function}()\{}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00524}00524  takeScreenShot();}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00525}00525     \textcolor{comment}{// Base64DataURL}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00526}00526 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00527}00527   \textcolor{comment}{//\$.ajax(\{}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00528}00528  \textcolor{comment}{// url: 'https://image.maps.ls.hereapi.com/mia/1.6/mapview',}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00529}00529  \textcolor{comment}{// type: 'GET',}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00530}00530  \textcolor{comment}{// data: \{}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00531}00531    \textcolor{comment}{// apiKey: 'uATgVUvD\_u3aL87IpdbDu-\/cUs1zNodOcJnF8YWfvJV0'}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00532}00532   \textcolor{comment}{//\},}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00533}00533   \textcolor{comment}{//success: function (data) \{}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00534}00534    \textcolor{comment}{// console.log(JSON.stringify(data));}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00535}00535  \textcolor{comment}{// \}}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00536}00536 \textcolor{comment}{//\});}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00537}00537       \textcolor{comment}{// inserta la imagen en html}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00538}00538    \textcolor{comment}{//    var node = document.getElementById('map');}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00539}00539      \textcolor{comment}{//   domtoimage.toPng(node).then(function (dataUrl) \{}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00540}00540        \textcolor{comment}{//                var img = new Image();}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00541}00541          \textcolor{comment}{//                img.src = dataUrl;}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00542}00542            \textcolor{comment}{//              document.getElementById("{}Pic"{}).appendChild(img);}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00543}00543              \textcolor{comment}{//        \});}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00544}00544 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00545}00545   }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00546}00546 \textcolor{comment}{//const \$boton = document.querySelector("{}\#capturar"{}), // El botón que desencadena}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00547}00547   \textcolor{comment}{//\$objetivo = document.querySelector("{}\#map"{}), // A qué le tomamos la foto}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00548}00548  \textcolor{comment}{// \$contenedorCanvas = document.querySelector("{}\#Pic"{}); // En dónde ponemos el elemento canvas}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00549}00549 \textcolor{comment}{// Agregar el listener al botón/}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00550}00550 \textcolor{comment}{//\$boton.addEventListener("{}click"{}, () => \{}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00551}00551  \textcolor{comment}{// html2canvas(\$objetivo,\{allowTaint: true, useCORS: true \}).then(canvas => \{}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00552}00552 \textcolor{comment}{//var imgData = canvas.toDataURL('image/jpeg');}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00553}00553 \textcolor{comment}{//\$contenedorCanvas.appendChild(canvas); // Lo agregamos como hijo del di}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00554}00554 \textcolor{comment}{//\});}}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00555}00555 }
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00556}00556 \});}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00557}00557 </script>}
\DoxyCodeLine{\Hypertarget{_datos_geolocalizacion_8php_source_l00558}00558 <?php require\_once \textcolor{stringliteral}{"{}vistas\(\backslash\)parte\_inferior.php"{}}?>}

\end{DoxyCode}
